<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<title>D3.jsの練習: svg</title>
	<style>
		.axis path, .axis line {
			fill :none;
			stroke: black;
		}
		.axis text {
			font-size: 11px;
		}
	</style>
</head>
<body>
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script>
	var dataset = [11, 25, 45, 30, 33];
	
	var w = 500;
	var h = 200;
	
	// var xScale = d3.scale.linear()
	// 	.domain([0, d3.max(dataset)])
	// 	.range([0, w]);

	// niceはdomainの値を見て切りのいい値にしてくれる
	var xScale = d3.scale.linear()
		.domain([0, d3.max(dataset)])
		.range([0, w])
		.nice();
	
	var svg = d3.select("body").append("svg").attr({width: w, height: h});
	
	var xAxis = d3.svg.axis()
		.scale(xScale)
		.orient("bottom");
		
	// g: group
	svg.append("g")
	.attr({
		class: "axis",
		transform: "translate(0, 180)"
	})
		.call(xAxis);
	
	svg.selectAll("rect")
		.data(dataset)
		.enter()
		.append("rect")
		.attr({
			x: 0,
			y: function(d, i) { return i * 25 },
			width: function(d) { return xScale(d); },
			height: 20,
			fill: "red"
		});
</script>
</body>
</html>
