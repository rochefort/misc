<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<title>D3.jsの編集</title>
</head>
<body>
	<p>Hello 1</p>
	<p>Hello 2</p>
	<p>Hello 3</p>
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script>
		/*
		1) 要素を指定
		select selectAll
		
		2)設定したり、取得したり
		https://github.com/mbostock/d3/wiki/API-Reference
		text
		attr
		style
		append
		remove
		*/
		var p = d3.select("body").selectAll("p");
		
		/*
		p.text("hello from d3!");
		p.style("font-size", "28px");
		
		p.text("hello from d3!")
		.style("font-size", "28px")
		.style("font-weight", "bold");
		*/

		/*
		p.text("hello from d3!")
		.style({
				"font-size": "28px",
				"font-weight": "bold"
			});
		alert(p.style("font-size"));
		*/

		// #04 style
		// p.style("font-size", function(){
		// 	return Math.floor(Math.random() * 29) + "px";
		// });
		
		// #05 要素追加/削除
		// d3.select("body").append("p").text("hello 4").remove();
		
		// #06,07,08 data
		// var dataset = [12, 24, 36, 48];
		// var p = d3.select("body").selectAll("p");

		// p.data(dataset).text(function(d){
		// 	return d;
		// });

		// p.data(dataset).text(function(d, i){
		// 	return i + "番目は" + d + "です！";
		// });
		
		// #07 update/enter/exit
		/*
		dataを使った主運間に仮想領域が作られる
		
		update: 対応する要素がある場合
		  -> text, style
		enter: 対応する要素が足りない場合(dataset = [12, 24, 36, 48])
		  -> append
		exit: 対応する要素が余った場合(dataset = [12, 24])
		  -> remove
		*/
		/*
		var dataset = [12, 24, 36, 48];
		var p = d3.select("body").selectAll("p");

		var update = p.data(dataset);
		var enter = update.enter();
		update.text(function(d){
			return "update:" + d;
		});
		
		enter.append("p").text(function(d){
			return "enter:" + d;
		});
		*/
		var dataset = [12, 24];
		var p = d3.select("body").selectAll("p");

		var update = p.data(dataset);
		var exit = update.exit();
		update.text(function(d){
			return "update:" + d;
		});
		
		exit.style("color", "red").remove();

		

</script>
</body>
</html>
